<div class="column is-one-quarter">
	<nav class="panel">
		<p class="panel-heading">Profile</p>

		<div class="panel-block">
			<article class="media">
				<div class="media-left">
					<figure class="image is-64x64">
						<% if Rails.env.production? %>
							<%= gravatar_image_tag(current_user.email, size: 64, alt: current_user.user_profile.name) %>
						<% else %>                              
							<% if (current_user.user_profile.image.attached?) %>            
								<%= image_tag current_user.user_profile.image %>  
							<% end %>                     
						<% end %>  
					</figure>
				</div>
				<div class="media-content">
					<div class="content">
						<p>
							<strong><%= current_user.user_profile.name %></strong><br />
							<small><%= current_user.user_profile.username %></small>
						</p>
					</div>
				</div>
			</article>
		</div>
		<div class="panel-block">
			<div class="level is-mobile">
				<div class="level-item has-centered-text">
					<div>
						<p class="heading">Tweeets</p>
						<p class="title is-6"><%= current_user.tweeets.count %></p>
					</div>
				</div>
				<div class="level-item has-centered-text">
					<div>
						<p class="heading">Following</p>
						<p class="title is-6"><%= current_user.followings.count %></p>
					</div>
				</div>
					<div class="level-item has-centered-text">
					<div>
						<p class="heading">Followers</p>
						<p class="title is-6"><%= current_user.followers.count %></p>
					</div>
				</div>
			</div>
		</div>

		<div class="panel-block">
			<div class="level is-mobile">
				<p class="control">
				  <%= link_to "Edit Profile", edit_user_profile_path(current_user.user_profile.id), class: "button is-info" %> 
				</p>
			</div>
		</div>	
	</nav>


	<nav class="panel">
		<p class="panel-heading">Your Followers</p>
		<% if (!current_user.followers.nil?) %>	
			<% current_user.followers.each do | follower | %>				
				<%= simple_form_for(follower) do |f| %>
					<div class="panel-block is-active">
						<article class="media">					
							<div class="media-left">
								<figure class="image is-32x32">
									<img src="https://bulma.io/images/placeholders/64x64.png">
								</figure>
							</div>
						</article>

						<strong><%= follower.follower_user.user_profile.name %></strong>	
																
						<div class="media-right">						
							<%= f.button :submit, "Follow", class: "button is-small is-info is-outlined is-rounded", style: "#{'display:none' if follower.is_folloded_by_curr_user == true}" %>
						</div>						
					</div>
				<% end %>
			<% end %>
		<% end %> 
	</nav>

	<nav class="panel">
		<p class="panel-heading">Your Followings</p>

		<% if (!current_user.followings.nil?) %>
			<% current_user.followings.each do | following | %>	
				<%= simple_form_for(following) do |f| %>				
					<div class="panel-block is-active">
						<article class="media">					
							<div class="media-left">
								<figure class="image is-32x32">
									<img src="https://bulma.io/images/placeholders/64x64.png">
								</figure>
							</div>
						</article>

						<strong><%= following.user.user_profile.name %></strong>
						<div class="media-right">								
							<%= button_to "Unfollow", @following, :method => :delete, class: "button is-small is-info is-outlined is-rounded" %>							
						</div>						
					</div>
				<% end %>			
			<% end %>
		<% end %> 
	</nav>

</div>